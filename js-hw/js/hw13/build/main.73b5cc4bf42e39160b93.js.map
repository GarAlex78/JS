{"version":3,"sources":["webpack:///./makeDivGrid.js","webpack:///./index.js","webpack:///./templates/cart.hbs"],"names":["makeGridItem","divSizer","document","createElement","classList","add","notyf","Notyf","duration","position","x","y","refs","key","url","setUrl","page","search","this","divGallery","querySelector","input","setPage","num","searchText","setSearchText","value","sentinal","handlerChoiceFoto","e","target","className","urlFoto","dataset","basicLightbox","show","getFoto","dataProcessing","console","log","addEventListener","preventDefault","innerHTML","text","elements","length","error","appendChild","makeDivGrid","IntersectionObserver","entries","observer","isIntersecting","rootMargin","threshold","observe","getPromis","a","fetch","response","json","data","dataPromis","arrayFoto","hits","success","showGallerys","masonryInstance","insertAdjacentHTML","cart","Masonry","columnWidth","itemSelector","gutter","transitionDuration","stagger","imagesLoaded","on","layout","Handlebars","module","exports","template","container","depth0","helpers","partials","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop"],"mappings":"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","file":"main.73b5cc4bf42e39160b93.js","sourcesContent":["const makeGridItem = () => {\r\n  const divSizer = document.createElement(\"div\");\r\n  divSizer.classList.add(\"grid-sizer\");\r\n  return divSizer;\r\n};\r\nexport default makeGridItem;\r\n","import { Notyf } from \"notyf\";\r\nimport \"notyf/notyf.min.css\";\r\nimport * as basicLightbox from \"basiclightbox\";\r\nimport cart from \"./templates/cart.hbs\";\r\nimport Masonry from \"masonry-layout\";\r\nimport imagesLoaded from \"imagesloaded\";\r\nimport makeDivGrid from \"./makeDivGrid\";\r\nimport \"./styles.css\";\r\nimport \"basiclightbox/dist/basicLightbox.min.css\";\r\nconst notyf = new Notyf({\r\n  duration: 2500,\r\n  position: {\r\n    x: \"right\",\r\n    y: \"top\"\r\n  }\r\n});\r\nconst refs = {\r\n  key: \"16000908-7761bac350ef0ad961c25a132\",\r\n  url: `https://pixabay.com`,\r\n  setUrl(page, search, key) {\r\n    return (this.url = `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${search}&page=${page}&per_page=12&key=${key}`);\r\n  },\r\n  divGallery: document.querySelector(\".gallery\"),\r\n  input: document.querySelector(\".js-search-form\"),\r\n  page: 1,\r\n  setPage(num) {\r\n    return (this.page = num);\r\n  },\r\n  searchText: \"\",\r\n  setSearchText(value) {\r\n    return (this.searchText = value);\r\n  },\r\n  sentinal: document.querySelector(\".sentinal\")\r\n};\r\nconst { divGallery, input, key, sentinal } = refs;\r\n//=====================submit=====================================\r\n\r\ninput.addEventListener(\"submit\", handlerInputSeach);\r\nfunction handlerInputSeach(e) {\r\n  e.preventDefault(); // отключаем submit по умолчанию\r\n  divGallery.innerHTML = \"\";\r\n  //очистка блока после изминения поиска\r\n  const text = e.target.elements[0].value;\r\n  if (text.length < 2) {\r\n    notyf.error(\"Not enough data to request\");\r\n  }\r\n  if (refs.searchText === text) {\r\n    refs.setPage(1);\r\n  }\r\n  refs.setSearchText(text); // запись в переменную значения поиска\r\n  refs.setPage(1); //зброс номера страници запроса\r\n  divGallery.appendChild(makeDivGrid());\r\n\r\n  getFoto();\r\n  infinitiSkroll();\r\n}\r\n//======================выбор фото для basicLightbox(модалки)===============\r\nfunction handlerChoiceFoto(e) {\r\n  if (e.target.className !== \"photo-card__img\") {\r\n    return;\r\n  }\r\n  const urlFoto = e.target.dataset.url;\r\n  const instance = basicLightbox.create(`\r\n      <img src=${urlFoto} width=\"800\" height=\"600\">\r\n  `);\r\n  instance.show();\r\n}\r\n//========================infinite scroll=================\r\nfunction infinitiSkroll(value) {\r\n  const options = {\r\n    rootMargin: \"0px 0px 100px 0px\",\r\n    threshold: 0.2\r\n  };\r\n  const onEntry = (entries, observer) => {\r\n    console.log(\"entries: \", entries);\r\n    if (entries[0].isIntersecting === true) {\r\n      console.log(\"isIntersecting: \", entries[0].isIntersecting);\r\n      handleClickLoadMore();\r\n    }\r\n    console.log(\"isIntersecting: \", entries[0].isIntersecting);\r\n    // if (value.length < 1 || refs.page === 1) {\r\n    //   return;\r\n    // }\r\n    // тут можно писать логику для проверки вхождения\r\n\r\n    //handleClickLoadMore();\r\n  };\r\n  const observer = new IntersectionObserver(onEntry, options);\r\n  observer.observe(sentinal);\r\n  //console.log(\"observer: \", observer);\r\n}\r\n//======================дозагрузка фото=========\r\nfunction handleClickLoadMore() {\r\n  refs.setPage((refs.page += 1)); //увеличеваем номер страницы для загрузкиследующей страницы\r\n  getFoto();\r\n}\r\n//==================создаем Url и делаем запрос ============\r\nfunction getFoto() {\r\n  refs.setUrl(refs.page, refs.searchText, key);\r\n  dataProcessing();\r\n  console.log(\"page: \", refs.page);\r\n}\r\n//====================запрос============\r\nconst getPromis = async () => {\r\n  try {\r\n    const response = await fetch(refs.url);\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n//======================обработка запроса===================\r\nconst dataProcessing = async () => {\r\n  try {\r\n    const dataPromis = await getPromis();\r\n    const arrayFoto = dataPromis.hits;\r\n    //console.log(\"dataPromis: \", arrayFoto);\r\n    if (arrayFoto.length === 0 && refs.page !== 1) {\r\n      notyf.success(\"At your request that's all\");\r\n      return;\r\n    }\r\n    if (arrayFoto.length === 0) {\r\n      notyf.error(\"Sorry, but there are no results for your search\");\r\n      return;\r\n    }\r\n    showGallerys(arrayFoto);\r\n    //infinitiSkroll(arrayFoto);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n//======================masonry==========================\r\nfunction funcMasonry() {\r\n  const masonryInstance = new Masonry(\".gallery\", {\r\n    columnWidth: \".grid-sizer\",\r\n    itemSelector: \".grid-item\",\r\n    gutter: 10,\r\n    transitionDuration: \"0.4s\",\r\n    stagger: 3\r\n  });\r\n  const imagesLoadedInstans = imagesLoaded(\".gallery\");\r\n  imagesLoadedInstans.on(\"progress\", () => {\r\n    masonryInstance.layout();\r\n  });\r\n}\r\n//=======================creat marcup ===============\r\nconst showGallerys = arrayFoto => {\r\n  divGallery.insertAdjacentHTML(\"beforeend\", `${cart({ arrayFoto })}`);\r\n  funcMasonry();\r\n  divGallery.addEventListener(\"click\", handlerChoiceFoto);\r\n};\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"grid-item\\\">\\r\\n    <img class=\\\"photo-card__img\\\" src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\\\" data-url=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons md\\\">thumb_up</i>\\r\\n            \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons md\\\">visibility</i>\\r\\n            \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons md\\\">comment</i>\\r\\n            \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons md\\\">cloud_download</i>\\r\\n            \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n        </p>\\r\\n    </div>\\r\\n</div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"arrayFoto\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":24,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}